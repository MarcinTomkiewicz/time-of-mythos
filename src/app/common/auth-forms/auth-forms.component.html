<ng-container *ngIf="isInTopBar; then topBarTemplate else normalTemplate"></ng-container>

<ng-template #topBarTemplate>
    <form
    [formGroup]="loginForm"
    (ngSubmit)="login()"
    class="d-flex flex-row justify-content-around align-items-center"
    style="gap: 5px"
  >
    <div class="d-flex flex-column">
      <input type="email" id="email" formControlName="email" placeholder="Email address"/>
      <div
        *ngIf="
          loginForm.get('email')?.hasError('required') &&
          loginForm.get('email')?.touched
        "
      >
        Email is required
      </div>
      <div
        *ngIf="
          loginForm.get('email')?.hasError('email') &&
          loginForm.get('email')?.touched
        "
      >
        Invalid email format
      </div>
    </div>
    <div class="d-flex flex-column">
      <input type="password" id="password" formControlName="password" placeholder="Password"/>
      <div
        *ngIf="
          loginForm.get('password')?.hasError('required') &&
          loginForm.get('password')?.touched
        "
      >
        Password is required
      </div>
      <div
        *ngIf="
          loginForm.get('password')?.hasError('minlength') &&
          loginForm.get('password')?.touched
        "
      >
        Password must be at least 6 characters long
      </div>
    </div>
    <button type="submit" class="btn" [disabled]="loginForm.invalid" (click)="login()">Login</button>
  </form>

</ng-template>


<ng-template #normalTemplate>
<div
    *ngIf="loginFormMode === 'register'"
    class="d-flex flex-column align-items-center"
  >
    <h4 class="text-center">Register Form</h4>
    <form
      [formGroup]="registerForm"
      (ngSubmit)="register()"
      class="d-flex flex-column align-items-center"
      style="gap: 5px"
    >
      <div class="d-flex flex-column">
        <label for="characterName">Character name:</label>
        <input type="text" id="characterName" formControlName="characterName" />
        <div
          *ngIf="
            registerForm.get('characterName')?.invalid &&
            registerForm.get('characterName')?.touched
          "
        >
          <div *ngIf="registerForm.get('characterName')?.hasError('required')">
            Character name is required
          </div>
        </div>
      </div>
      <div class="d-flex flex-column">
        <label for="email">Email address:</label>
        <input type="email" id="email" formControlName="email" />
        <div
          *ngIf="
            registerForm.get('email')?.invalid &&
            registerForm.get('email')?.touched
          "
        >
          <div *ngIf="registerForm.get('email')?.hasError('required')">
            Email is required
          </div>
          <div *ngIf="registerForm.get('email')?.hasError('email')">
            Invalid email format
          </div>
        </div>
      </div>
      <div class="d-flex flex-column">
        <label for="password">Password:</label>
        <input type="password" id="password" formControlName="password" />
        <div
          *ngIf="
            registerForm.get('password')?.invalid &&
            registerForm.get('password')?.touched
          "
        >
          <div *ngIf="registerForm.get('password')?.hasError('required')">
            Password is required
          </div>
          <div *ngIf="registerForm.get('password')?.hasError('minLength')">
            Password must be at least 6 characters long
          </div>
        </div>
      </div>
      <button type="submit" class="btn" [disabled]="registerForm.invalid">Register</button>
    </form>
    <button
      type="button"
      class="switch-button"
      (click)="toggleLoginFormMode('login')"
    >
      Already registered? Login here!
    </button>
  </div>
  <div
    *ngIf="loginFormMode === 'login'"
    class="'d-flex flex-column align-items-center"
  >
    <h4 class="text-center">Login Form</h4>
    <form
      [formGroup]="loginForm"
      (ngSubmit)="login()"
      class="d-flex flex-column align-items-center"
      style="gap: 5px"
    >
      <div class="d-flex flex-column">
        <label for="email">Email address:</label>
        <input type="email" id="email" formControlName="email" />
        <div
          *ngIf="
            loginForm.get('email')?.hasError('required') &&
            loginForm.get('email')?.touched
          "
        >
          Email is required
        </div>
        <div
          *ngIf="
            loginForm.get('email')?.hasError('email') &&
            loginForm.get('email')?.touched
          "
        >
          Invalid email format
        </div>
      </div>
      <div class="d-flex flex-column">
        <label for="password">Password:</label>
        <input type="password" id="password" formControlName="password" />
        <div
          *ngIf="
            loginForm.get('password')?.hasError('required') &&
            loginForm.get('password')?.touched
          "
        >
          Password is required
        </div>
        <div
          *ngIf="
            loginForm.get('password')?.hasError('minlength') &&
            loginForm.get('password')?.touched
          "
        >
          Password must be at least 6 characters long
        </div>
      </div>
      <button type="submit" class="btn" [disabled]="loginForm.invalid" (click)="login()">Login</button>
      <button type="button" class="switch-button" (click)="toggleLoginFormMode('register')">
        Not registered yet? Register here!
      </button>
    </form>
  </div>
</ng-template>